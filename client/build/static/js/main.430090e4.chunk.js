(this.webpackJsonptentti=this.webpackJsonptentti||[]).push([[0],{632:function(t,e,a){"use strict";a.r(e);var n=a(1),i=a(0),s=a(19),r=a.n(s),c=a(50),o=a(6),l=a(18),u=a(10),d=a.n(u),h=a(29),j=a(39),b=a(7),x=a(243),p=a(115),m=a(81),k=a(125),y=Object(j.a)((function(t){return{root:{display:"flex",fontSize:"0.875rem",flexWrap:"wrap"},title:{flexGrow:1},cover:{width:50,padding:10},margin:{margin:t.spacing(1)},withoutLabel:{marginTop:t.spacing(3)},textField:{width:"25ch"}}})),O=Object(b.a)({root:{color:k.a[400],"&$checked":{color:k.a[600]}},checked:{}})((function(t){return Object(n.jsx)(x.a,Object(h.a)({color:"default"},t))})),g=Object(p.a)(m.a)({color:"#fff",padding:"6px 8px",fontSize:"0.875rem"}),f=Object(p.a)(m.a)({color:"#3f51b5",padding:"6px 8px"}),v=a(699),_=a(680),w=a(681),I=a(682),C=a(683),E=a(635),S=a(80),T=a(154),N=a(636),A=a(688),F=a(684),z=a(685),K=a(686),L=a(687),B=a(91),D=a.n(B),U=a(38),P=a.n(U),R=a(219),W=new(a.n(R).a)({fi:{kieli:"kieli",tentit:"tentit",omatTentit:"omat tentit",tilastot:"tilastot",rekisteroidy:"rekister\xf6idy",kirjaudu:"kirjaudu sis\xe4\xe4n",tietoa:"tietoa",kayttaja:"k\xe4ytt\xe4j\xe4",yllapitaja:"yll\xe4pit\xe4j\xe4",poistu:"kirjaudu ulos",etunimi:"etunimi",sukunimi:"sukunimi",sahkoposti:"s\xe4hk\xf6posti",salasana:"salasana",rooli:"rooli",nayta:"n\xe4yt\xe4",vastaukset:"vastaukset",esimerkki:"esimerkki",kaavio:"kaavio",tiedostonlahetys:"tiedoston l\xe4hetys",pudotatiedostot:"Pudota tiedostot t\xe4h\xe4n",valitsetiedostot:"tai klikkaa valitaksesi tiedostoja"},en:{kieli:"language",tentit:"exams",omatTentit:"my exams",tilastot:"statistics",rekisteroidy:"sign in",kirjaudu:"log in",tietoa:"about",kayttaja:"user",yllapitaja:"admin",poistu:"sign out",etunimi:"first name",sukunimi:"last name",sahkoposti:"email",salasana:"password",rooli:"role",nayta:"show",vastaukset:"answers",esimerkki:"example",kaavio:"chart",tiedostonlahetys:"upload file",pudotatiedostot:"Drop the files here",valitsetiedostot:"or click to select files"}}),H=a(9),V=a.n(H),J=a(15),M=a(16),G=a.n(M),q=function(t){if(void 0===t)throw new Error("S\xe4hk\xf6postia ei v\xe4litetty, tarkista lomake!");return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase())},Z=function(t){if(void 0===t)throw new Error("Salasanaa ei v\xe4litetty, tarkista lomake!");return/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{6,}/.test(t)},Y=function(){var t=JSON.parse(JSON.stringify(window.localStorage.getItem("jwtToken")));return t||!1},$=function(t,e){var a=-1;return-1!==e&&t.map((function(t,n){t.id===e&&(a=n)})),console.log("CurrentExamIndex "+a),a},Q=null;new Error("Environment not properly set!");Q="https://tentti-fullstack.herokuapp.com/";var X=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n){var i,s,r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={headers:{Authorization:"bearer ".concat(n)}},t.prev=1,t.next=4,G.a.get(Q+"kayttaja/",i);case 4:(s=t.sent).data.id?(r=Number(s.data.id),c="".concat(s.data.etunimi," ").concat(s.data.sukunimi),e(r),a(c),console.log(s.data.id,s.data.etunimi,s.data.sukunimi)):console.log("kirjautunut k\xe4ytt\xe4j\xe4 hukassa"),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a,n){return t.apply(this,arguments)}}(),tt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n){var i,s,r,c,o,l,u,d,h,j,b,x,p,m,k;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=!1,t.prev=1,t.next=4,G()({method:"get",url:"".concat(Q,"kayttaja/"),headers:{Authorization:"bearer ".concat(Y())}});case 4:s=t.sent,i="admin"===s.data.rooli,t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 11:return r={headers:{Authorization:"bearer ".concat(Y())}},t.prev=12,c="",c=n?i?Q+"tentti":Q+"oikeus_muokata_tenttia/"+e:Q+"kayttajan_tentit/"+e,t.next=17,G.a.get(c,r);case 17:if(o=t.sent,!((l=o.data).length>0)){t.next=63;break}u=0;case 21:if(!(u<l.length)){t.next=60;break}return l[u].kysymykset=[],t.next=25,G.a.get(Q+"tentin_kysymykset/"+l[u].id,r);case 25:if(d=t.sent,l[u].kysymykset=d.data,!(l[u].kysymykset.length>0)){t.next=57;break}return t.next=30,G.a.get(Q+"kayttajan_vastaukset/"+e+"/"+l[u].id,r);case 30:h=t.sent,j=0;case 32:if(!(j<l[u].kysymykset.length)){t.next=57;break}return l[u].kysymykset[j].vaihtoehdot=[],l[u].kysymykset[j].kuvat=[],t.next=37,G.a.get(Q+"kysymyksen_vaihtoehdot/"+l[u].kysymykset[j].id,r);case 37:return b=t.sent,t.next=40,G.a.get(Q+"kysymyksen_kuvat/"+l[u].kysymykset[j].id,r);case 40:x=t.sent,l[u].kysymykset[j].vaihtoehdot=b.data,l[u].kysymykset[j].kuvat=x.data,p=0;case 44:if(!(p<l[u].kysymykset[j].vaihtoehdot.length)){t.next=54;break}return l[u].kysymykset[j].vaihtoehdot[p].vastaus=null,t.next=48,G.a.get(Q+"vaihtoehdon_kuvat/"+l[u].kysymykset[j].vaihtoehdot[p].id,r);case 48:if(m=t.sent,l[u].kysymykset[j].vaihtoehdot[p].kuvat=m.data,h.data.length>0)for(k=0;k<h.data.length;k++)l[u].kysymykset[j].vaihtoehdot[p].id===h.data[k].vaihtoehto_id&&(l[u].kysymykset[j].vaihtoehdot[p].vastaus=h.data[k].vastaus);case 51:p++,t.next=44;break;case 54:j++,t.next=32;break;case 57:u++,t.next=21;break;case 60:a({type:"INIT_DATA",data:l}),t.next=64;break;case 63:throw console.log("Dataa ei saatu palvelimelta.");case 64:t.next=69;break;case 66:t.prev=66,t.t1=t.catch(12),console.log(t.t1);case 69:case"end":return t.stop()}}),t,null,[[1,8],[12,66]])})));return function(e,a,n){return t.apply(this,arguments)}}(),et=function(){var t=Object(J.a)(V.a.mark((function t(e,a){var n,i;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:"bearer ".concat(Y())}},t.prev=1,t.next=4,G.a.get(Q+"kuva/"+e+"/"+a,n);case 4:if(!(i=t.sent).data[0].id){t.next=7;break}return t.abrupt("return",i.data);case 7:t.next=13;break;case 9:return t.prev=9,t.t0=t.catch(1),console.log(t.t0),t.abrupt("return",t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a){return t.apply(this,arguments)}}(),at=function(){var t=Object(J.a)(V.a.mark((function t(e){var a,n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"bearer ".concat(Y())}},t.prev=1,t.next=4,G.a.get(Q+"kysymys_aihe",a);case 4:n=t.sent,e(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Virhe tietokantahaussa!");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),nt=function(){var t=Object(J.a)(V.a.mark((function t(e){var a,n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={headers:{Authorization:"bearer ".concat(Y())}},t.prev=1,t.next=4,G.a.get(Q+"aihe",a);case 4:n=t.sent,e(n.data),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),console.log("Virhe tietokantahaussa!");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),it=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r,c,o,l){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G()({method:"put",url:"".concat(Q,"paivita_valinta/").concat(r,"/").concat(n,"/").concat(s,"/").concat(c,"/").concat(a),headers:{Authorization:"bearer ".concat(Y())}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 8:l({type:"checked_changed",data:{examIndex:o,cardIndex:e,listItemIndex:i,checkedValue:a}});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,a,n,i,s,r,c,o,l){return t.apply(this,arguments)}}(),st=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n){var i;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(Q+"lisaa_kysymys/"+e),t.next=4,G()({method:"post",url:"".concat(Q,"lisaa_kysymys/").concat(e),headers:{Authorization:"bearer ".concat(Y())}});case 4:return i=t.sent,t.abrupt("return",i.data);case 8:t.prev=8,t.t0=t.catch(0),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 11:a({type:"add_card",data:{examIndex:n}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a,n){return t.apply(this,arguments)}}(),rt=function(){var t=Object(J.a)(V.a.mark((function t(e,a){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(Q+"lisaa_kysymys_tenttiin/"+e+"/"+a),t.next=4,G()({method:"post",url:"".concat(Q,"lisaa_kysymys_tenttiin/").concat(e,"/").concat(a),headers:{Authorization:"bearer ".concat(Y())}});case 4:return n=t.sent,t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(0),console.log("Kysymyksen liitos tenttiin ep\xe4onnistui!");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}(),ct=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i){var s;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(Q+"lisaa_vaihtoehto/"+n),t.next=4,G()({method:"post",url:"".concat(Q,"lisaa_vaihtoehto/").concat(n),headers:{Authorization:"bearer ".concat(Y())}});case 4:return s=t.sent,t.abrupt("return",s.data);case 8:t.prev=8,t.t0=t.catch(0),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 11:e({type:"add_choise",data:{cardIndex:a,examIndex:i}});case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a,n,i){return t.apply(this,arguments)}}(),ot=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G()({method:"put",url:"".concat(Q,"paivita_oikea_valinta/").concat(s,"/").concat(i),headers:{Authorization:"bearer ".concat(Y())}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 8:e({type:"correct_checked_changed",data:{examIndex:a,cardIndex:n,listItemIndex:r,checkedValue:i}});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,a,n,i,s,r){return t.apply(this,arguments)}}(),lt=function(){var t=Object(J.a)(V.a.mark((function t(e,a){var n;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G()({method:"post",url:"".concat(Q,"lisaa_tentti/").concat(a),headers:{Authorization:"bearer ".concat(Y())}});case 3:return n=t.sent,e({type:"add_exam"}),t.abrupt("return",n.data);case 8:t.prev=8,t.t0=t.catch(0),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,a){return t.apply(this,arguments)}}(),ut=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s){var r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={kysymys_id:s,selectedImages:i},t.prev=1,t.next=4,G()({method:"post",url:"".concat(Q,"liita_kuva_kysymykseen/"),data:r,headers:{Authorization:"bearer ".concat(Y())}});case 4:return c=t.sent,t.abrupt("return",c.data);case 8:t.prev=8,t.t0=t.catch(1),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 11:console.log(a),e({type:"add_image_card",data:{examIndex:a,cardIndex:n,kuvat:i}});case 13:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a,n,i,s){return t.apply(this,arguments)}}(),dt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r,c){var o,l;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={kysymys_id:s,vaihtoehto_id:c,selectedImages:i},t.prev=1,t.next=4,G()({method:"post",url:"".concat(Q,"liita_kuva_vaihtoehtoon/"),data:o,headers:{Authorization:"bearer ".concat(Y())}});case 4:return l=t.sent,t.abrupt("return",l.data);case 8:t.prev=8,t.t0=t.catch(1),console.log("Datan p\xe4ivit\xe4minen ei onnistunut.");case 11:e({type:"add_image_choise",data:{examIndex:a,cardIndex:n,listItemIndex:r,kuvat:i}});case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e,a,n,i,s,r,c){return t.apply(this,arguments)}}(),ht=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r,c,o,l){var u;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return u={kysymys_id:r,vaihtoehto_id:o,sijainti:i,kuva_id:s},t.prev=1,e("kysymys"===i?{type:"image_deleted_card",data:{examIndex:a,cardIndex:n,imageIndex:c}}:{type:"image_deleted_choise",data:{examIndex:a,cardIndex:n,listItemIndex:l,imageIndex:c}}),t.next=5,G()({method:"delete",url:"".concat(Q,"poista_kuvan_liitos/"),data:u,headers:{Authorization:"bearer ".concat(Y())}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,a,n,i,s,r,c,o,l){return t.apply(this,arguments)}}(),jt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G()({method:"put",url:"".concat(Q,"paivita_tentti/").concat(n,"/").concat(i),headers:{Authorization:"bearer ".concat(Y())}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:e({type:"exam_changed",data:{examIndex:a,newExam:i}});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,a,n,i){return t.apply(this,arguments)}}(),bt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s){var r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={lause:n},t.prev=1,t.next=4,G()({method:"put",url:"".concat(Q,"paivita_kysymys/").concat(i),data:r,headers:{Authorization:"bearer ".concat(Y())}});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:e({type:"card_label_changed",data:{examIndex:a,cardIndex:s,newCardLabel:n}});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,a,n,i,s){return t.apply(this,arguments)}}(),xt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r){var c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c="",r.map((function(t,e){t.id===n&&(c=t.aihe)})),t.prev=2,t.next=5,G()({method:"put",url:"".concat(Q,"paivita_kysymyksen_aihe/").concat(i,"/").concat(n),headers:{Authorization:"bearer ".concat(Y())}});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:e({type:"card_aihe_changed",data:{examIndex:a,cardIndex:s,newCardAihe:c}});case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e,a,n,i,s,r){return t.apply(this,arguments)}}(),pt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r,c){var o,u,d;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={aihe:n},t.prev=1,t.next=4,G()({method:"post",url:"".concat(Q,"lisaa_aihe/").concat(i),data:o,headers:{Authorization:"bearer ".concat(Y())}});case 4:u=t.sent,d={id:u.data,aihe:o.aihe},c([].concat(Object(l.a)(r),[d])),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),console.log(t.t0);case 12:e({type:"card_aihe_changed",data:{examIndex:a,cardIndex:s,newCardAihe:o.aihe}});case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e,a,n,i,s,r,c){return t.apply(this,arguments)}}(),mt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,G()({method:"put",url:"".concat(Q,"paivita_vaihtoehto/").concat(i,"/").concat(n),headers:{Authorization:"bearer ".concat(Y())}});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:e({type:"choise_changed",data:{examIndex:a,cardIndex:s,listItemIndex:r,newChoise:n}});case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,a,n,i,s,r){return t.apply(this,arguments)}}(),kt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Kysymys_id "+n+", tentti_id "+s+", liitos poistettu!"),t.prev=1,t.next=4,G()({method:"delete",url:"".concat(Q,"poista_kysymyksen_liitos/").concat(n,"/").concat(s),headers:{Authorization:"bearer ".concat(Y())}});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:e({type:"card_deleted",data:{examIndex:a,cardIndex:i}});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,a,n,i,s){return t.apply(this,arguments)}}(),yt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s,r){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Vaihtoehto_id "+n+", kysymys_id "+s+", liitos poistettu!"),t.prev=1,t.next=4,G()({method:"delete",url:"".concat(Q,"poista_vaihtoehdon_liitos/").concat(n,"/").concat(s),headers:{Authorization:"bearer ".concat(Y())}});case 4:t.next=9;break;case 6:t.prev=6,t.t0=t.catch(1),console.log(t.t0);case 9:e({type:"choise_deleted",data:{examIndex:a,cardIndex:i,listItemIndex:r}});case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,a,n,i,s,r){return t.apply(this,arguments)}}(),Ot=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i){var s,r;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return s=null,t.prev=1,t.next=4,G()({method:"delete",url:"".concat(Q,"poista_tentti/").concat(n,"/").concat(i),headers:{Authorization:"bearer ".concat(Y())}});case 4:return r=t.sent,(s=r.data).poistettu?(console.log("Tentti_id "+n+", poistettu!"),e({type:"exam_deleted",data:{examIndex:a}})):console.log("Tentti_id "+n+", poistaminen ep\xe4onnistui liitoksien takia!"),t.abrupt("return",s);case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a,n,i){return t.apply(this,arguments)}}(),gt=function(){var t=Object(J.a)(V.a.mark((function t(e,a,n,i,s){var r,c;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,t.prev=1,t.next=4,G()({method:"delete",url:"".concat(Q,"poista_kysymys/").concat(a,"/").concat(s),headers:{Authorization:"bearer ".concat(Y())}});case 4:return c=t.sent,(r=c.data).poistettu?(console.log("Kysymys_id "+a+", poistettu!"),e({type:"card_deleted",data:{cardIndex:n,examIndex:i}})):console.log("Kysymys_id "+a+", poistaminen ep\xe4onnistui liitoksien takia!"),t.abrupt("return",r);case 10:t.prev=10,t.t0=t.catch(1),console.log(t.t0);case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,a,n,i,s){return t.apply(this,arguments)}}(),ft=a(700),vt=a(678),_t=a(679),wt=function(t){var e=t.questionString,a="";switch(t.background){case"light":a=vt.a;break;case"darkBlue":a=_t.a;break;case"dark":a=_t.a;default:a=vt.a}var i=e.search("CODE");if(-1!==i){var s=e.substring(i+5),r=e.slice(0,i-1);return Object(n.jsxs)(n.Fragment,{children:[r,Object(n.jsx)(ft.a,{language:"javascript",style:a,wrapLongLines:!0,showLineNumbers:!0,children:s})]})}return Object(n.jsx)(n.Fragment,{children:"/admin"!==window.location.pathname?e:""})},It=[],Ct=Object(i.createContext)(It),Et=Ct.Provider,St=function(t){var e=t.children,a=Object(i.useReducer)((function(t,e){var a=JSON.parse(JSON.stringify(t));switch(e.type){case"add_choise":return a[e.data.examIndex].kysymykset[e.data.cardIndex].vaihtoehdot.push({oikea_vastaus:!1,vaihtoehto:"Uusi vaihtoehto",kuvat:[]}),a;case"add_card":return a[e.data.examIndex].kysymykset.push({lause:"Uusi kysymys",vaihtoehdot:[],kuvat:[],aihe:"Muut"}),a;case"card_label_changed":return a[e.data.examIndex].kysymykset[e.data.cardIndex].lause=e.data.newCardLabel,a;case"card_aihe_changed":return a[e.data.examIndex].kysymykset[e.data.cardIndex].aihe=e.data.newCardAihe,a;case"card_deleted":return a[e.data.examIndex].kysymykset.splice(e.data.cardIndex,1),a;case"add_exam":return a.push({aloitus:"",kysymykset:[],lopetus:"",minimipisteraja:"",nimi:"Uusi tentti",suoritettu:!1}),a;case"add_image_card":return a[e.data.examIndex].kysymykset[e.data.cardIndex].kuvat=e.data.kuvat,a;case"add_image_choise":return a[e.data.examIndex].kysymykset[e.data.cardIndex].vaihtoehdot[e.data.listItemIndex].kuvat=e.data.kuvat,a;case"image_deleted_card":return a[e.data.examIndex].kysymykset[e.data.cardIndex].kuvat.splice(e.data.imageIndex,1),a;case"image_deleted_choise":return a[e.data.examIndex].kysymykset[e.data.cardIndex].vaihtoehdot[e.data.listItemIndex].kuvat.splice(e.data.imageIndex,1),a;case"exam_changed":return a[e.data.examIndex].nimi=e.data.newExam,a;case"exam_deleted":return a.splice(e.data.examIndex,1),a;case"correct_checked_changed":return a[e.data.examIndex].kysymykset[e.data.cardIndex].vaihtoehdot[e.data.listItemIndex].oikea_vastaus=e.data.checkedValue,a;case"checked_changed":return a[e.data.examIndex].kysymykset[e.data.cardIndex].vaihtoehdot[e.data.listItemIndex].vastaus=e.data.checkedValue,a;case"choise_changed":return a[e.data.examIndex].kysymykset[e.data.cardIndex].vaihtoehdot[e.data.listItemIndex].vaihtoehto=e.data.newChoise,a;case"choise_deleted":return a[e.data.examIndex].kysymykset[e.data.cardIndex].vaihtoehdot.splice(e.data.listItemIndex,1),a;case"answer_changed":return a[e.data.examIndex].cards[e.data.cardIndex].choises[e.data.listItemIndex].correctAnswer=e.data.checkedValue,a;case"LOGOUT_USER":return t=It,It;case"INIT_DATA":return e.data;default:throw new Error}}),It),s=Object(o.a)(a,2),r=s[0],c=s[1];return Object(n.jsx)(Et,{value:{state:r,dispatch:c},children:e})},Tt=Object(i.createContext)(),Nt=function(t){var e=Object(i.useState)([]),a=Object(o.a)(e,2),s=a[0],r=a[1],c=Object(i.useState)([]),l=Object(o.a)(c,2),u=l[0],d=l[1];return Object(n.jsx)(Tt.Provider,{value:{globalShowAllCardImages:[s,r],globalShowAllChoiseImages:[u,d]},children:t.children})};var At=function(t){var e=t.currentUser,a=t.currentExamId,s=t.setCurrentExamId,r=t.currentExamIndex,c=t.setCurrentExamIndex,u=t.kaikkiKysymykset,h=(t.rows,t.setRows),j=Object(i.useContext)(Tt),b=j.globalShowAllCardImages,p=j.globalShowAllChoiseImages,k=Object(o.a)(b,2),g=k[0],B=k[1],U=Object(o.a)(p,2),R=U[0],H=U[1],V=Object(i.useContext)(Ct),J=V.state,M=V.dispatch,G=Object(i.useState)(!1),q=Object(o.a)(G,2),Z=q[0],Y=q[1],Q=Object(i.useState)(1),X=Object(o.a)(Q,2),et=X[0],at=(X[1],Object(i.useState)([])),nt=Object(o.a)(at,2),st=nt[0],rt=nt[1],ct=y();return Object(i.useEffect)((function(){tt(e,M,!1)}),[e,M]),Object(i.useEffect)((function(){c($(J,a))}),[J,a]),r>=0&&J&&J[r]&&J[r].id&&J[r].kysymykset?Object(n.jsxs)(v.a,{children:[Object(n.jsx)(_.a,{}),Object(n.jsxs)(w.a,{style:{marginTop:"80px",marginBottom:"15px"},maxWidth:"lg",component:"main",children:[Object(n.jsx)("h2",{children:J[r].nimi}),Object.values(J[r].kysymykset).map((function(t,a){return Object(n.jsxs)(I.a,{style:{marginTop:"10px"},className:ct.root,children:[Object(n.jsx)(C.a,{style:{width:"100%"},className:ct.content,children:Object(n.jsxs)(E.a,{children:[Object(n.jsx)("p",{className:"label",style:{whiteSpace:"pre-wrap"},children:Object(n.jsx)(wt,{questionString:t.lause})}),Object(n.jsx)("div",{style:{paddingTop:"30px"},className:ct.root,children:Object(n.jsxs)(F.a,{cellHeight:150,style:{width:"100%"},children:[Object(n.jsx)(z.a,{cols:2,style:{height:"auto"},children:Object(n.jsx)(K.a,{component:"div",style:{width:"100%"},children:t.kuvat.length>2&&Object(n.jsx)(S.a,{style:{float:"right"},"aria-label":"expand",onClick:function(){g.includes(a)?B(g.filter((function(t){return t!==a}))):B((function(t){return[].concat(Object(l.a)(t),[a])}))},children:Object(n.jsx)(T.a,{badgeContent:g.includes(a)?0:t.kuvat.length-2,color:"primary",children:g.includes(a)?Object(n.jsx)(P.a,{}):Object(n.jsx)(D.a,{})})})})},"Subheader"),t.kuvat.map((function(t,e){return(e<2||g.includes(a))&&Object(n.jsxs)(z.a,{style:{width:"240px",maxHeight:"150"},children:[Object(n.jsx)("a",{href:"//localhost:4000/uploads/"+t.tiedostonimi,target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{style:{width:"100%",height:"100%",objectFit:"cover",display:st.includes(t.id)?"block":"none"},src:"//localhost:4000/uploads_thumbnails/thumbnail_"+t.tiedostonimi,alt:t.tiedostonimi,onLoad:function(){!st.includes(t.id)&&rt((function(e){return[].concat(Object(l.a)(e),[t.id])}))},onError:function(t){t.target.onerror=null,t.target.style.display="none"}})}),!st.includes(t.id)&&Object(n.jsx)(L.a,{variant:"rect",width:512,height:512})]},d()())}))]})}),Object.values(t.vaihtoehdot).map((function(t,s){return Object(n.jsxs)(i.Fragment,{children:[Object(n.jsxs)(N.a,{children:[Object(n.jsx)(x.a,{checked:t.vastaus,disabled:Z,onChange:function(n){it(a,n.target.checked,t.id,s,J[r].id,e,et,r,M)}}),Z&&Object(n.jsx)(O,{disabled:!0,checked:t.oikea_vastaus,color:"primary"}),Object(n.jsx)("p",{style:{overflow:"hidden",textOverflow:"ellipsis"},children:t.vaihtoehto})]},d()()),Object(n.jsx)(N.a,{children:Object(n.jsx)("div",{style:{paddingLeft:"45px",width:"100%"},className:ct.root,children:Object(n.jsxs)(F.a,{cellHeight:150,style:{width:"100%"},className:ct.gridList,children:[Object(n.jsx)(z.a,{cols:2,style:{height:"auto"},children:Object(n.jsx)(K.a,{component:"div",style:{width:"100%"},children:t.kuvat.length>2&&Object(n.jsx)(S.a,{style:{float:"right"},"aria-label":"expand",onClick:function(){R.includes(s)?H(R.filter((function(t){return t!==s}))):H((function(t){return[].concat(Object(l.a)(t),[s])}))},children:Object(n.jsx)(T.a,{badgeContent:R.includes(s)?0:t.kuvat.length-2,color:"primary",children:R.includes(s)?Object(n.jsx)(P.a,{}):Object(n.jsx)(D.a,{})})})})},"Subheader"),t.kuvat.map((function(t,e){return(e<2||R.includes(s))&&Object(n.jsxs)(z.a,{style:{width:"240px",maxHeight:"150"},children:[Object(n.jsx)("a",{href:"//localhost:4000/uploads/"+t.tiedostonimi,target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{style:{width:"100%",height:"100%",objectFit:"cover",display:st.includes(t.id)?"block":"none"},src:"//localhost:4000/uploads_thumbnails/thumbnail_"+t.tiedostonimi,alt:t.tiedostonimi,onLoad:function(){!st.includes(t.id)&&rt((function(e){return[].concat(Object(l.a)(e),[t.id])}))},onError:function(t){t.target.onerror=null,t.target.style.display="none"}})}),!st.includes(t.id)&&Object(n.jsx)(L.a,{variant:"rect",width:512,height:512})]},d()())}))]})})},d()())]},d()())}))]})}),Z&&(s=Object.values(t.vaihtoehdot),s.forEach((function(t,e){null===t.oikea_vastaus&&(s[e].oikea_vastaus=!1),null===t.vastaus&&(s[e].vastaus=!1)})),s.filter((function(t){return t.vastaus===t.oikea_vastaus})).length===s.length)?Object(n.jsx)(A.a,{className:ct.cover,children:Object(n.jsx)("img",{className:"image",src:"/images/selma.png",height:"30px",width:"30px",alt:"Selma"})}):null]},d()());var s})),Object(n.jsxs)(m.a,{style:{marginTop:"10px",marginRight:"10px"},name:"vastaukset",variant:"contained",color:"primary",onClick:function(){return Y(!Z)},children:[W.nayta," ",W.vastaukset]})]},d()())]},d()()):Object(n.jsxs)(v.a,{children:[Object(n.jsx)(_.a,{}),Object(n.jsx)(w.a,{style:{marginTop:"80px",marginBottom:"15px"},maxWidth:"lg",component:"main",children:Object.values(J).map((function(t,e){return Object(n.jsx)(f,{style:{marginTop:"10px"},name:t.nimi,onClick:function(){c(e),s(t.id),h(function(t){var e=u;return J[t].kysymykset.forEach((function(t,a){e.forEach((function(a,n){a.id===t.id&&e.splice(n,1)}))})),e}(e))},children:t.nimi},d()())}))},d()())]},d()())},Ft=a(244),zt=a(65),Kt=a(697),Lt=a(696),Bt=a(58),Dt=a.n(Bt),Ut=a(89),Pt=a(702),Rt=a(689),Wt=a(690),Ht=a(691),Vt=a(239),Jt=Object(b.a)((function(t){return{root:{margin:0,padding:t.spacing(2)},closeButton:{position:"absolute",right:t.spacing(1),top:t.spacing(1),color:t.palette.grey[500]}}}))((function(t){var e=t.children,a=t.classes,i=t.onClose,s=Object(Ut.a)(t,["children","classes","onClose"]);return Object(n.jsxs)(Rt.a,Object(h.a)(Object(h.a)({disableTypography:!0,className:a.root},s),{},{children:[Object(n.jsx)(Vt.a,{variant:"h6",children:e}),i?Object(n.jsx)(S.a,{"aria-label":"close",className:a.closeButton,onClick:i,children:Object(n.jsx)(P.a,{})}):null]}))})),Mt=Object(b.a)((function(t){return{root:{padding:t.spacing(2)}}}))(Wt.a),Gt=Object(b.a)((function(t){return{root:{margin:0,padding:t.spacing(1)}}}))(Ht.a);function qt(t){var e=t.currentExamIndex,a=t.setCurrentExamIndex,s=t.currentDatabaseExamIdChanged,r=Object(i.useContext)(Ct),c=r.state,l=r.dispatch,u=Object(i.useState)(""),d=Object(o.a)(u,2),h=d[0],j=d[1],b=Object(i.useState)(!0),x=Object(o.a)(b,2),p=x[0],k=x[1],y=Object(i.useState)(!1),O=Object(o.a)(y,2),g=O[0],f=O[1],v=Object(i.useRef)(!0),_=Object(i.useState)(!1),w=Object(o.a)(_,2),I=w[0],C=w[1];function E(){return(E=Object(J.a)(V.a.mark((function t(n){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ot(l,e,s,n).then((function(t){if(!0===v.current){var e="",n="",i="",s="",r=!1;if(!t.poistettu&&t.liitokset.kayttaja_id_luoja.length>0){r=!0;var c=" luoma.";1===t.liitokset.kayttaja_id_luoja.length?n="T\xe4m\xe4 tentti on k\xe4ytt\xe4j\xe4n "+t.liitokset.kayttaja_id_luoja[0]+c:(n="T\xe4t\xe4 tentti\xe4 on muokannut k\xe4ytt\xe4j\xe4t ",t.liitokset.kayttaja_id_luoja.forEach((function(e,a){a===t.liitokset.kayttaja_id_luoja.length-1?n+=e+c:a===t.liitokset.kayttaja_id_luoja.length-2?n+=e+" ja ":n+=e+", "}))),e+=n}if(!t.poistettu&&t.liitokset.kayttaja_id_tilaaja.length>0){r=!0;1===t.liitokset.kayttaja_id_tilaaja.length?i="Tentin on tilannut k\xe4ytt\xe4j\xe4 "+t.liitokset.kayttaja_id_tilaaja[0]+".":(i="Tentin on tilannut k\xe4ytt\xe4j\xe4t ",t.liitokset.kayttaja_id_tilaaja.forEach((function(e,a){a===t.liitokset.kayttaja_id_tilaaja.length-1?i+=e+".":a===t.liitokset.kayttaja_id_tilaaja.length-2?i+=e+" ja ":i+=e+", "}))),e+=" "+i}if(!t.poistettu&&t.liitokset.kayttaja_id_vastaaja.length>0){r=!0;1===t.liitokset.kayttaja_id_vastaaja.length?s="Tenttiin on vastannut k\xe4ytt\xe4j\xe4 "+t.liitokset.kayttaja_id_vastaaja[0]+".":(s="Tenttiin on vastannut k\xe4ytt\xe4j\xe4t ",t.liitokset.kayttaja_id_vastaaja.forEach((function(e,a){a===t.liitokset.kayttaja_id_vastaaja.length-1?s+=e+".":a===t.liitokset.kayttaja_id_vastaaja.length-2?s+=e+" ja ":s+=e+", "}))),e+=" "+s}var o="";!t.poistettu&&t.liitokset.kurssi_id.length>0&&(r=!0,1===t.liitokset.kurssi_id.length?o="Tentti on liitetty kurssiin "+t.liitokset.kurssi_id[0]+".":(o="Tentti on liitetty kursseihin ",t.liitokset.kurssi_id.forEach((function(e,a){a===t.liitokset.kurssi_id.length-1?o+=e+".":a===t.liitokset.kurssi_id.length-2?o+=e+" ja ":o+=e+", "}))));var l="";t.liitokset.kysymys_id.length>0&&(r=!0,1===t.liitokset.kysymys_id.length?l="Se on liitetty kysymykseen "+t.liitokset.kysymys_id[0]+".":(l="Se on liitetty kysymyksiin ",t.liitokset.kysymys_id.forEach((function(e,a){a===t.liitokset.kysymys_id.length-1?l+=e+".":a===t.liitokset.kysymys_id.length-2?l+=e+" ja ":l+=e+", "}))));var u="";t.poistettu?(u="Tentti poistettiin onnistuneesti.",a(-1)):u=r?"Tentti\xe4 ei poistettu, koska muut k\xe4ytt\xe4v\xe4t sit\xe4. Voit siit\xe4 huolimatta halutessasi poistaa sen LOPULLISESTI.":"Tentti\xe4 ei voitu juuri nyt poistaa. Yrit\xe4 my\xf6hemmin uudelleen.",!1===g?(j(e+" "+o+" "+l+" "+u),f(!0)):(j(u),f(!1),k(!1))}}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}Object(i.useEffect)((function(){return function(){v.current=!1}}),[]);var T=function(){C(!1)};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S.a,{label:"delete",color:"primary",onClick:function(){j(""),k(!0),f(!1),C(!0)},children:Object(n.jsx)(Dt.a,{})}),Object(n.jsxs)(Pt.a,{onClose:T,"aria-labelledby":"customized-dialog-title",open:I,children:[Object(n.jsx)(Jt,{id:"customized-dialog-title",onClose:T,children:"Tentin poistaminen"}),Object(n.jsx)(Mt,{dividers:!0,children:Object(n.jsx)(Vt.a,{gutterBottom:!0,children:""===h?"Haluatko varmasti poistaa tentin ".concat(c[e].nimi,"?"):h})}),Object(n.jsxs)(Gt,{children:[Object(n.jsx)(m.a,{autoFocus:!0,onClick:function(){p?function(t){E.apply(this,arguments)}(g):T()},color:p?"secondary":"default",children:p?g?"POISTA LOPULLISESTI":"Poista":"ok"}),Object(n.jsx)(m.a,{autoFocus:!0,onClick:function(){T()},color:"default",children:"Peruuta"})]})]})]})}var Zt=a(224),Yt=a.n(Zt),$t=a(692),Qt=Object(b.a)((function(t){return{root:{margin:0,padding:t.spacing(2)},closeButton:{position:"absolute",right:t.spacing(1),top:t.spacing(1),color:t.palette.grey[500]}}}))((function(t){var e=t.children,a=t.classes,i=t.onClose,s=Object(Ut.a)(t,["children","classes","onClose"]);return Object(n.jsxs)(Rt.a,Object(h.a)(Object(h.a)({disableTypography:!0,className:a.root},s),{},{children:[Object(n.jsx)(Vt.a,{variant:"h6",children:e}),i?Object(n.jsx)(S.a,{"aria-label":"close",className:a.closeButton,onClick:i,children:Object(n.jsx)(P.a,{})}):null]}))})),Xt=Object(b.a)((function(t){return{root:{padding:t.spacing(2)}}}))(Wt.a),te=Object(b.a)((function(t){return{root:{margin:0,padding:t.spacing(1)}}}))(Ht.a);function ee(t){var e=t.currentExamIndex,a=t.dataGridSelection,s=t.setDataGridSelection,r=t.setRows,c=t.rows,u=Object(i.useContext)(Ct),h=u.state,j=u.dispatch,b=Object(i.useState)([]),x=Object(o.a)(b,2),p=x[0],k=x[1],y=Object(i.useState)(!0),O=Object(o.a)(y,2),g=O[0],f=O[1],v=Object(i.useState)(!1),_=Object(o.a)(v,2),w=_[0],I=_[1],C=Object(i.useRef)(!0),T=Object(i.useState)(!1),A=Object(o.a)(T,2),F=A[0],z=A[1];Object(i.useEffect)((function(){return function(){C.current=!1}}),[]);function K(){return(K=Object(J.a)(V.a.mark((function t(e,a,n,i){return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,gt(j,a,n,i,e).then((function(t){if(!0===C.current){var e="",a="",n="",i="",r=!1;if(console.log(t),!t.poistettu&&t.liitokset.kayttaja_id_luoja.length>0){r=!0;var c=" luomassa tentiss\xe4.";1===t.liitokset.kayttaja_id_luoja.length?a="T\xe4m\xe4 kysymys on k\xe4ytt\xe4j\xe4n "+t.liitokset.kayttaja_id_luoja[0]+c:(a="T\xe4t\xe4 kysymyksen sis\xe4lt\xe4v\xe4\xe4 tentti\xe4 on muokannut k\xe4ytt\xe4j\xe4t ",t.liitokset.kayttaja_id_luoja.forEach((function(e,n){n===t.liitokset.kayttaja_id_luoja.length-1?a+=e+c:n===t.liitokset.kayttaja_id_luoja.length-2?a+=e+" ja ":a+=e+", "}))),e+=a}if(!t.poistettu&&t.liitokset.kayttaja_id_tilaaja.length>0){r=!0;1===t.liitokset.kayttaja_id_tilaaja.length?n="Kysymyksen sis\xe4lt\xe4v\xe4n tentin on tilannut k\xe4ytt\xe4j\xe4 "+t.liitokset.kayttaja_id_tilaaja[0]+".":(n="Kysymyksen sis\xe4lt\xe4v\xe4n tentin on tilannut k\xe4ytt\xe4j\xe4t ",t.liitokset.kayttaja_id_tilaaja.forEach((function(e,a){a===t.liitokset.kayttaja_id_tilaaja.length-1?n+=e+".":a===t.liitokset.kayttaja_id_tilaaja.length-2?n+=e+" ja ":n+=e+", "}))),e+=" "+n}if(!t.poistettu&&t.liitokset.kayttaja_id_vastaaja.length>0){r=!0;1===t.liitokset.kayttaja_id_vastaaja.length?i="Kysymyksen sis\xe4lt\xe4v\xe4\xe4n tenttiin on vastannut k\xe4ytt\xe4j\xe4 "+t.liitokset.kayttaja_id_vastaaja[0]+".":(i="Kysymyksen sis\xe4lt\xe4v\xe4\xe4n tenttiin on vastannut k\xe4ytt\xe4j\xe4t ",t.liitokset.kayttaja_id_vastaaja.forEach((function(e,a){a===t.liitokset.kayttaja_id_vastaaja.length-1?i+=e+".":a===t.liitokset.kayttaja_id_vastaaja.length-2?i+=e+" ja ":i+=e+", "}))),e+=" "+i}var o="";!t.poistettu&&t.liitokset.kurssi_id.length>0&&(r=!0,1===t.liitokset.kurssi_id.length?o="Kysymyksen sis\xe4lt\xe4v\xe4n tentti on liitetty kurssiin "+t.liitokset.kurssi_id[0]+".":(o="Kysymyksen sis\xe4lt\xe4v\xe4n tentti on liitetty kursseihin ",t.liitokset.kurssi_id.forEach((function(e,a){a===t.liitokset.kurssi_id.length-1?o+=e+".":a===t.liitokset.kurssi_id.length-2?o+=e+" ja ":o+=e+", "}))));var u="";t.liitokset.vaihtoehto_id.length>0&&(r=!0,1===t.liitokset.vaihtoehto_id.length?u="Se on liitetty vaihtoehtoon "+t.liitokset.vaihtoehto_id[0]+".":(u="Se on liitetty vaihtoehtoihin ",t.liitokset.vaihtoehto_id.forEach((function(e,a){a===t.liitokset.vaihtoehto_id.length-1?u+=e+".":a===t.liitokset.vaihtoehto_id.length-2?u+=e+" ja ":u+=e+", "}))));var d="";t.liitokset.kuva_id.length>0&&(r=!0,1===t.liitokset.kuva_id.length?d="Se on liitetty kuvaan "+t.liitokset.kuva_id[0]+".":(d="Se on liitetty kuviin ",t.liitokset.kuva_id.forEach((function(e,a){a===t.liitokset.kuva_id.length-1?d+=e+".":a===t.liitokset.kuva_id.length-2?d+=e+" ja ":d+=e+", "}))));var h="";t.liitokset.aihe_id.length>0&&(r=!0,1===t.liitokset.aihe_id.length?h="Se on liitetty aiheeseen "+t.liitokset.aihe_id[0]+".":(h="Se on liitetty aiheisiin ",t.liitokset.aihe_id.forEach((function(e,a){a===t.liitokset.aihe_id.length-1?h+=e+".":a===t.liitokset.aihe_id.length-2?h+=e+" ja ":h+=e+", "}))));var j="";if(t.poistettu)j="Kysymys poistettiin onnistuneesti.",s([]),B();else if(r){var b="";t.liitokset.tentti_id>0&&(t.liitokset.tentti_id.forEach((function(e,a){b+=e,a===t.liitokset.tentti_id.length-2?b+=" ja ":a+1!==t.liitokset.tentti_id.length&&(b+=", ")})),j="Kysymyst\xe4 ei poistettu, koska muut k\xe4ytt\xe4v\xe4t tenttej\xe4 ("+b+") joissa kysymys on osana.")}else j="Kysymyst\xe4 ei voitu juuri nyt poistaa. Yrit\xe4 my\xf6hemmin uudelleen.";!1===w?(k((function(t){return[].concat(Object(l.a)(t),[e+" "+o+" "+u+" "+d+" "+h+" "+j])})),I(!0)):(k((function(t){return[].concat(Object(l.a)(t),[j])})),I(!1),f(!1))}}));case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log(t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))).apply(this,arguments)}var L=function(){z(!1)},B=function(){r(c.filter((function(t){return!a.includes(t.id)}))),s([])};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(S.a,{style:{float:"right"},label:"delete",color:"secondary",disabled:!(a.length>0),onClick:function(){k([]),f(!0),I(!1),z(!0)},children:Object(n.jsx)(Dt.a,{})}),Object(n.jsxs)(Pt.a,{onClose:L,"aria-labelledby":"customized-dialog-title",open:F,children:[Object(n.jsx)(Qt,{id:"customized-dialog-title",onClose:L,children:"Poista useita kysymyksi\xe4"}),Object(n.jsx)(Xt,{dividers:!0,children:Object(n.jsxs)($t.a,{container:!0,spacing:1,children:[Object(n.jsx)($t.a,{item:!0,xs:1,children:Object(n.jsx)(Yt.a,{})}),Object(n.jsx)($t.a,{item:!0,xs:11,children:Object(n.jsx)(Vt.a,{component:"span",gutterBottom:!0,children:0===p.length?"Oletko varma, ett\xe4 haluat poistaa pysyv\xe4sti n\xe4m\xe4 valitsemasi ".concat(a.length," kysymyst\xe4? Niiden palauttaminen j\xe4lkik\xe4teen ei ole mahdollista! Ota my\xf6s huomioon, ett\xe4 kysymykset poistuvat jokaisesta tentist\xe4 miss\xe4 niit\xe4 t\xe4ll\xe4 hetkell\xe4 k\xe4ytet\xe4\xe4n!"):Object(n.jsx)(E.a,{children:p.map((function(t,e){return Object(n.jsxs)(N.a,{children:["Kysymys ",a[e]," (",t,")"]},d()())}))})})})]})}),Object(n.jsxs)(te,{children:[Object(n.jsx)(m.a,{autoFocus:!0,onClick:function(){g?a.forEach((function(t){var a;!function(t,e,a,n){K.apply(this,arguments)}(w,t,(a=t,void h[e].kysymykset.forEach((function(t,n){if(h[e].kysymykset[n].id===a)return n}))),e)})):L()},color:g?"secondary":"default",children:g?w?"Poista pysyv\xe4sti!":"Kyll\xe4":"Ok"}),g&&Object(n.jsx)(m.a,{autoFocus:!0,onClick:function(){L()},color:"default",children:"Ei"})]})]})]})}var ae=a(225),ne=a(227),ie=a(228),se=a.n(ie),re=Object(j.a)((function(t){return{root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden",backgroundColor:t.palette.background.paper,width:"490px"},gridList:{width:"480px",height:"470px"},icon:{color:"rgba(255, 255, 255, 0.54)"}}})),ce=Object(b.a)((function(t){return{root:{margin:0,padding:t.spacing(2)},closeButton:{position:"absolute",right:t.spacing(1),top:t.spacing(1),color:t.palette.grey[500]}}}))((function(t){var e=t.children,a=t.classes,i=t.onClose,s=Object(Ut.a)(t,["children","classes","onClose"]);return Object(n.jsxs)(Rt.a,Object(h.a)(Object(h.a)({disableTypography:!0,className:a.root},s),{},{children:[Object(n.jsx)(Vt.a,{variant:"h6",children:e}),i?Object(n.jsx)(S.a,{"aria-label":"close",className:a.closeButton,onClick:i,children:Object(n.jsx)(P.a,{})}):null]}))})),oe=Object(b.a)((function(t){return{root:{padding:t.spacing(2)}}}))(Wt.a),le=Object(b.a)((function(t){return{root:{margin:0,padding:t.spacing(1)}}}))(Ht.a);function ue(t){var e=t.examIndex,a=t.cardIndex,s=t.listItemIndex,r=t.sijainti,c=t.setNewImageId,u=Object(i.useContext)(Ct),h=u.state,j=u.dispatch,b=Object(i.useState)(!1),p=Object(o.a)(b,2),k=p[0],y=p[1],O=Object(i.useState)([]),g=Object(o.a)(O,2),f=g[0],v=g[1],_=Object(i.useState)([]),w=Object(o.a)(_,2),I=w[0],C=w[1],E=Object(i.useState)([]),T=Object(o.a)(E,2),N=T[0],A=T[1],K=Object(i.useState)(6),B=Object(o.a)(K,1)[0],D=Object(i.useState)(0),U=Object(o.a)(D,2),P=U[0],R=U[1],W=Object(i.useState)(0),H=Object(o.a)(W,2),M=H[0],G=H[1],q=re();Object(i.useEffect)((function(){var t=!1;return function(){var e=Object(J.a)(V.a.mark((function e(){var a,n,i,s,r;return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=[],n=[],e.next=4,et(B,P);case 4:if(a=e.sent,0===M&&(t||G(a[0].full_count)),a.length>0){i=Object(ne.a)(a);try{for(i.s();!(s=i.n()).done;)r=s.value,n.push({id:r.id,img:r.tiedostonimi,title:r.tiedostonimi,author:"tentit-app",cols:2})}catch(c){i.e(c)}finally{i.f()}}t||(v(n),C([]));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){t=!0}}),[P,B,M]);var Z=function(){y(!1)},Y=function(){A([]),R(0)},$=function(t){var e=!1;if(N.length>0)for(var a in N)N[a]===t&&(e=!0);return e};return Object(n.jsxs)("div",{children:[Object(n.jsx)(S.a,{style:{float:"left"},label:"delete",color:"primary",onClick:function(){Y(),y(!0)},children:Object(n.jsx)(se.a,{})}),Object(n.jsxs)(Pt.a,{classes:{paper:q.dialogPaper},fullWidth:!0,maxWidth:"sm",onClose:Z,"aria-labelledby":"customized-dialog-title",open:k,children:[Object(n.jsxs)(ce,{id:"customized-dialog-title",onClose:Z,children:["Kuvan lis\xe4\xe4minen ","kysymys"===r?"kysymykseen":"vaihtoehtoon","."]}),Object(n.jsx)(oe,{dividers:!0,children:Object(n.jsx)("div",{className:q.root,children:Object(n.jsx)(F.a,{cellHeight:150,className:q.gridList,cols:4,children:f.map((function(t){return Object(n.jsxs)(z.a,{style:{width:"240px",maxHeight:"150"},cols:t.cols||1,children:[Object(n.jsxs)("a",{href:"//localhost:4000/uploads/"+t.img,target:"_blank",rel:"noreferrer",children:[Object(n.jsx)("img",{style:{width:"100%",height:"100%",objectFit:"cover",display:I.includes(t.id)?"block":"none"},src:"//localhost:4000/uploads_thumbnails/thumbnail_"+t.img,alt:t.title,onLoad:function(){!I.includes(t.id)&&C((function(e){return[].concat(Object(l.a)(e),[t.id])}))}}),!I.includes(t.id)&&Object(n.jsx)(L.a,{animation:"wave",variant:"rect",width:512,height:512})]}),Object(n.jsx)(Lt.a,{title:t.title,subtitle:Object(n.jsxs)("span",{children:["id: ",t.id]}),actionIcon:Object(n.jsx)(x.a,{style:{color:"white"},color:"primary",inputProps:{"aria-label":"secondary checkbox"},checked:$(t.id),onClick:function(){var e;$(t.id)?function(t){if(N.length>0)for(var e in N)if(N[e]===t){var a=N.filter((function(e){return e!==t}));A(a)}}(t.id):(e=t.id,A((function(t){return[].concat(Object(l.a)(t),[e])})))}})})]},d()())}))})})}),Object(n.jsxs)(le,{children:[Object(n.jsxs)(Vt.a,{children:["Sivu ",P/B+1,"/",Math.ceil(M/B)]}),Object(n.jsx)(m.a,{disabled:!(P>0),autoFocus:!0,onClick:function(){R(P-B)},color:"default",children:"Edellinen"}),Object(n.jsx)(m.a,{disabled:!(P<M-B),autoFocus:!0,onClick:function(){R(P+B)},color:"default",children:"Seuraava"}),Object(n.jsx)(m.a,{autoFocus:!0,onClick:function(){var t=h[e].kysymykset[a].id;if("kysymys"===r)c(ut(j,e,a,N,t));else{var n=h[e].kysymykset[a].vaihtoehdot[s].id;c(dt(j,e,a,N,t,s,n))}Z()},color:"secondary",children:N.length<=1?"Lis\xe4\xe4 kuva":"Lis\xe4\xe4 kuvat ("+N.length+")"}),Object(n.jsx)(m.a,{autoFocus:!0,onClick:function(){Z()},color:"default",children:"Peruuta"})]})]})]})}var de=function(t){var e=t.currentUser,a=t.currentExamId,s=t.setCurrentExamId,r=t.currentExamIndex,c=t.setCurrentExamIndex,u=t.kaikkiKysymykset,h=t.setKaikkiKysymykset,j=t.rows,b=t.setRows,x=Object(i.useContext)(Tt),p=x.globalShowAllCardImages,m=x.globalShowAllChoiseImages,k=Object(o.a)(p,2),g=k[0],A=k[1],B=Object(o.a)(m,2),U=B[0],R=B[1],W=Object(i.useContext)(Ct),H=W.state,V=W.dispatch,J=Object(i.useState)(-1),M=Object(o.a)(J,2),G=M[0],q=M[1],Z=Object(i.useState)(-1),Y=Object(o.a)(Z,2),Q=Y[0],X=Y[1],et=Object(i.useState)(-1),it=Object(o.a)(et,2),ut=it[0],dt=it[1],Ot=Object(i.useState)(-1),gt=Object(o.a)(Ot,2),ft=gt[0],vt=gt[1],_t=Object(i.useState)(-1),It=Object(o.a)(_t,2),Et=It[0],St=It[1],Nt=Object(i.useState)([]),At=Object(o.a)(Nt,2),Bt=At[0],Ut=At[1],Pt=Object(i.useState)([]),Rt=Object(o.a)(Pt,2),Wt=Rt[0],Ht=Rt[1],Vt=Object(i.useState)([]),Jt=Object(o.a)(Vt,2),Mt=Jt[0],Gt=Jt[1],Zt=Object(i.useState)([]),Yt=Object(o.a)(Zt,2),$t=Yt[0],Qt=Yt[1],Xt=y();Object(i.useEffect)((function(){tt(e,V,!0),at(h),nt(Ht)}),[e,h,V,Q,ut,ft,r,j,Et]);var te=Object(i.useState)(function(t,e,a){return-1!==$(t,e)&&t[a]?t[a].nimi:""}(H,a,r)),ne=Object(o.a)(te,2),ie=ne[0],se=ne[1];Object(i.useEffect)((function(){Qt([])}),[]),Object(i.useEffect)((function(){c($(H,a))}),[H,a]);var re=Object(i.useRef)(null);return r>=0&&H&&H[r]&&H[r].id&&H[r].kysymykset&&ie?Object(n.jsxs)(v.a,{children:[Object(n.jsx)(_.a,{}),Object(n.jsxs)(w.a,{style:{marginTop:"80px",marginBottom:"15px"},maxWidth:"lg",component:"main",children:[Object(n.jsxs)("h2",{children:[Object(n.jsx)(Ft.a,{type:"text",style:{width:"85%"},value:ie,id:H[r].id,onChange:function(t){se(t.target.value)},onBlur:function(){""===ie&&(se("Nimet\xf6n"),jt(V,r,H[r].id,"Nimet\xf6n")),jt(V,r,H[r].id,ie)},children:" "},d()())," ",Object(n.jsx)(qt,{currentExamIndex:r,setCurrentExamIndex:c,currentDatabaseExamIdChanged:G},d()())]},d()()),H[r].kysymykset.map((function(t,e){return Object(n.jsx)(I.a,{style:{marginTop:"10px"},className:Xt.root,children:Object(n.jsx)(C.a,{style:{width:"100%"},className:Xt.content,children:Object(n.jsxs)(E.a,{children:[Object(n.jsx)(wt,{style:{width:"100%"},questionString:t.lause,background:"darkBlue"},d()()),Object(n.jsx)(ue,{examIndex:r,cardIndex:e,sijainti:"kysymys",setNewImageId:St},d()()),Object(n.jsx)(Ft.a,{multiline:!0,type:"text",style:{minWidth:"93%"},defaultValue:t.lause,id:t.id,onBlur:function(a){bt(V,r,a.target.value,t.id,e)}},d()()),Object(n.jsx)(S.a,{style:{float:"right"},label:"delete",color:"primary",onClick:function(){kt(V,r,t.id,e,H[r].id);var a=[{id:t.id,lause:t.lause,aihe:t.aihe}];b([].concat(Object(l.a)(j),a))},children:Object(n.jsx)(Dt.a,{})},d()()),$t.includes(t.id)?Object(n.jsx)(Ft.a,{type:"text",defaultValue:"",inputRef:re,onBlur:function(a){a.target.value?(pt(V,r,a.target.value,t.id,e,Wt,Ht),console.log("Ja eikun uusi aihe "+a.target.value+" talteen!"),Qt([])):Qt([])}},d()()):Object(n.jsx)("span",{children:t.aihe},d()()),Object(n.jsxs)(Ft.a,{style:{minWidth:"2%"},value:"",select:!0,onChange:function(a){a.target.value?xt(V,r,a.target.value,t.id,e,Wt):(Qt((function(e){return[].concat(Object(l.a)(e),[t.id])})),setTimeout((function(){re.current.focus()}),100))},InputProps:{disableUnderline:!0},children:[Wt.map((function(t){return Object(n.jsx)(zt.a,{value:t.id,children:t.aihe},t.id)})),Object(n.jsx)(zt.a,{children:"...lis\xe4\xe4 aihe"},d()()),"Focus TextField"]},d()()),Object(n.jsx)("br",{}),Object(n.jsx)("div",{style:{paddingTop:"30px"},className:Xt.root,children:Object(n.jsxs)(F.a,{cellHeight:150,style:{width:"100%"},children:[Object(n.jsx)(z.a,{cols:2,style:{height:"auto"},children:Object(n.jsx)(K.a,{component:"div",style:{width:"100%"},children:t.kuvat.length>2&&Object(n.jsx)(S.a,{style:{float:"right"},"aria-label":"expand",onClick:function(){g.includes(e)?A(g.filter((function(t){return t!==e}))):A((function(t){return[].concat(Object(l.a)(t),[e])}))},children:Object(n.jsx)(T.a,{badgeContent:g.includes(e)?0:t.kuvat.length-2,color:"primary",children:g.includes(e)?Object(n.jsx)(P.a,{}):Object(n.jsx)(D.a,{})})})})},d()()),t.kuvat.map((function(a,i){return(i<2||g.includes(e))&&Object(n.jsxs)(z.a,{style:{width:"240px",maxHeight:"150"},children:[Object(n.jsx)("a",{href:"//localhost:4000/uploads/"+a.tiedostonimi,target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{style:{width:"100%",height:"100%",objectFit:"cover",display:Bt.includes(a.id)?"block":"none"},src:"//localhost:4000/uploads_thumbnails/thumbnail_"+a.tiedostonimi,alt:a.tiedostonimi,onLoad:function(){!Bt.includes(a.id)&&Ut((function(t){return[].concat(Object(l.a)(t),[a.id])}))},onError:function(t){t.target.onerror=null,t.target.style.display="none"}})}),Bt.includes(a.id)?Object(n.jsx)(Lt.a,{title:Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("span",{children:["id: ",a.id]})}),subtitle:a.tiedostonimi,actionIcon:Object(n.jsx)(S.a,{style:{color:"white",float:"right"},label:"delete",color:"primary",onClick:function(){return St(ht(V,r,e,"kysymys",a.id,t.id,i))},children:Object(n.jsx)(Dt.a,{})},d()())}):Object(n.jsx)(L.a,{variant:"rect",width:512,height:512})]},d()())}))]})}),t.vaihtoehdot.map((function(a,s){return Object(n.jsxs)(i.Fragment,{children:[Object(n.jsx)(N.a,{children:Object(n.jsx)(wt,{style:{width:"100%"},questionString:a.vaihtoehto},d()())},d()()),Object(n.jsxs)(N.a,{children:[Object(n.jsx)(ue,{examIndex:r,cardIndex:e,listItemIndex:s,sijainti:"vaihtoehto",setNewImageId:St},d()()),Object(n.jsx)(O,{checked:a.oikea_vastaus,color:"primary",onChange:function(t){ot(V,r,e,t.target.checked,a.id,s,H[r].id)}}),Object(n.jsx)(Ft.a,{multiline:!0,style:{minWidth:"80%",overflow:"hidden",textOverflow:"ellipsis"},defaultValue:a.vaihtoehto,onBlur:function(t){mt(V,r,t.target.value,a.id,e,s)}},a.id),Object(n.jsx)(S.a,{style:{float:"right"},label:"delete",color:"primary",onClick:function(){return yt(V,r,a.id,e,t.id,s)},children:Object(n.jsx)(Dt.a,{})})]},d()()),Object(n.jsx)(N.a,{children:Object(n.jsx)("div",{style:{paddingLeft:"45px",width:"100%"},className:Xt.root,children:Object(n.jsxs)(F.a,{cellHeight:150,style:{width:"100%"},className:Xt.gridList,children:[Object(n.jsx)(z.a,{cols:2,style:{height:"auto"},children:Object(n.jsx)(K.a,{component:"div",style:{width:"100%"},children:a.kuvat.length>2&&Object(n.jsx)(S.a,{style:{float:"right"},"aria-label":"expand",onClick:function(){U.includes(s)?R(U.filter((function(t){return t!==s}))):R((function(t){return[].concat(Object(l.a)(t),[s])}))},children:Object(n.jsx)(T.a,{badgeContent:U.includes(s)?0:a.kuvat.length-2,color:"primary",children:U.includes(s)?Object(n.jsx)(P.a,{}):Object(n.jsx)(D.a,{})})})})},d()()),a.kuvat.map((function(i,c){return(c<2||U.includes(s))&&Object(n.jsxs)(z.a,{style:{width:"240px",maxHeight:"150"},children:[Object(n.jsx)("a",{href:"//localhost:4000/uploads/"+i.tiedostonimi,target:"_blank",rel:"noreferrer",children:Object(n.jsx)("img",{style:{width:"100%",height:"100%",objectFit:"cover",display:Bt.includes(i.id)?"block":"none"},src:"//localhost:4000/uploads_thumbnails/thumbnail_"+i.tiedostonimi,alt:i.tiedostonimi,onLoad:function(){!Bt.includes(i.id)&&Ut((function(t){return[].concat(Object(l.a)(t),[i.id])}))},onError:function(t){t.target.onerror=null,t.target.style.display="none"}})}),Bt.includes(i.id)?Object(n.jsx)(Lt.a,{title:Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("span",{children:["id: ",i.id]})}),subtitle:i.tiedostonimi,actionIcon:Object(n.jsx)(S.a,{style:{color:"white",float:"right"},label:"delete",color:"primary",onClick:function(){return St(ht(V,r,e,"vaihtoehto",i.id,t.id,c,a.id,s))},children:Object(n.jsx)(Dt.a,{})},d()())}):Object(n.jsx)(L.a,{variant:"rect",width:512,height:512})]},d()())}))]})})},d()())]},d()())})),Object(n.jsx)(S.a,{onClick:function(){var a=null;a=t.id?t.id:ut,vt(ct(V,e,a,r))},children:Object(n.jsx)(Kt.a,{children:"add_circle"})})]},d()())},d()())},d()())})),Object(n.jsxs)("div",{style:{width:"100%",textAlign:"center"},children:[Object(n.jsx)(S.a,{onClick:function(){Mt.length>0?(console.log(Mt),Mt.forEach((function(t,e){dt(rt(t,H[r].id))})),b(j.filter((function(t){return!Mt.includes(t.id)}))),Gt([])):(dt(st(G,V,r)),b(j.filter((function(t){return!Mt.includes(t.id)}))))},children:Object(n.jsx)(Kt.a,{children:"add_circle"})}),Object(n.jsx)(ee,{currentExamIndex:r,dataGridSelection:Mt,setDataGridSelection:Gt,setRows:b,rows:j})]}),Object(n.jsx)(I.a,{style:{marginTop:"10px"},className:Xt.root,children:Object(n.jsx)("div",{style:{height:500,width:"100%"},children:Object(n.jsx)(ae.a,{columns:[{field:"id",headerName:"ID",type:"number",flex:.25},{field:"lause",headerName:"Kysymys",flex:1.5},{field:"aihe",headerName:"Aihealue",flex:.75}],rows:j,pageSize:7,checkboxSelection:!0,onSelectionModelChange:function(t){Gt(t.selectionModel)}})})})]},d()())]},d()()):Object(n.jsxs)(v.a,{children:[Object(n.jsx)(_.a,{},d()()),Object(n.jsxs)(w.a,{style:{marginTop:"80px",marginBottom:"15px"},maxWidth:"lg",component:"main",children:[Object.values(H).map((function(t,e){return Object(n.jsx)(f,{style:{marginTop:"10px"},name:t.nimi,onClick:function(){c(e),t.id?(q(t.id),s(t.id),se(t.nimi),b(function(t){var e=u;return H[t].kysymykset.forEach((function(t,a){e.forEach((function(a,n){a.id===t.id&&e.splice(n,1)}))})),e}(e))):q(Q)},children:t.nimi},d()())})),Object(n.jsx)(S.a,{onClick:function(){X(lt(V,e))},children:Object(n.jsx)(Kt.a,{children:" add_circle"},d()())},d()())]},d()())]},d()())},he=a(123);function je(t,e){return Math.floor(Math.random()*(e-t+1))+t}var be={labels:["kivi","magmakivilajit","metaforiset kivilajit","javascript"],datasets:[{label:"# oikeista vastauksista",data:[je(1,10),je(1,10),je(1,10),je(1,10)],backgroundColor:["rgba(255, 99, 132, 0.2)","rgba(54, 162, 235, 0.2)","rgba(75, 192, 192, 0.2)","rgba(255, 206, 86, 0.2)"],borderColor:["rgba(255, 99, 132, 1)","rgba(54, 162, 235, 1)","rgba(75, 192, 192, 1)","rgba(255, 206, 86, 1)"],borderWidth:1}]},xe={legend:{display:!0},scales:{xAxes:[{display:!0,ticks:{min:0}}],yAxes:[{display:!0}]}},pe=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsxs)("h1",{className:"title",children:["1. ",W.esimerkki," ",W.kaavio]})}),Object(n.jsx)(he.HorizontalBar,{data:be,options:xe})]})};function me(t,e){return Math.floor(Math.random()*(e-t+1))+t}var ke={labels:["kivi","magmakivilajit","metaforiset kivilajit","javascript"],datasets:[{data:[me(1,3),me(3,5),me(5,7),me(7,10)],backgroundColor:["#FF6384","#36A2EB","#FFCE56","#25CE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56","#25CE56"]}]},ye=function(){return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)("div",{className:"header",children:Object(n.jsxs)("h1",{className:"title",children:["2. ",W.esimerkki," ",W.kaavio]})}),Object(n.jsx)(he.Doughnut,{data:ke})]})};var Oe=function(){return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)(v.a,{children:[Object(n.jsx)(_.a,{}),Object(n.jsxs)(w.a,{style:{marginTop:"80px",marginBottom:"15px"},maxWidth:"lg",component:"main",children:[Object(n.jsx)(I.a,{style:{marginTop:"10px"},children:Object(n.jsx)(C.a,{style:{width:"100%"},className:"HorizontalBarChart",children:Object(n.jsx)(pe,{})})}),Object(n.jsx)(I.a,{style:{marginTop:"10px"},children:Object(n.jsx)(C.a,{style:{width:"100%"},className:"DoughnutChart",children:Object(n.jsx)(ye,{})})})]},"container1_user")]})})},ge=a(232),fe=a(230),ve=a.n(fe),_e=null;new Error("Environment not properly set!");_e="https://tentti-fullstack.herokuapp.com/";var we=function(){var t=Object(i.useCallback)((function(t){var e=ve.a.post(_e+"upload");t.forEach((function(t){e.attach("photos",t)})),e.end((function(t,e){console.log(e)}))}),[]),e=Object(ge.a)({onDrop:t}),a=e.getRootProps,s=e.getInputProps,r=e.isDragActive;return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",Object(h.a)(Object(h.a)({name:"photos",style:{paddingTop:"60px"}},a()),{},{children:[Object(n.jsx)("input",Object(h.a)({},s())),r?Object(n.jsx)("p",{children:"Drop the files here ..."}):Object(n.jsx)("p",{children:"Drag 'n' drop some files here, or click to select files"})]}),"photos")})},Ie=a(704),Ce=a(155),Ee=a(701),Se=a(705),Te=a(640),Ne=a(101),Ae=a(639),Fe=null;new Error("Environment not properly set!");Fe="https://tentti-fullstack.herokuapp.com/";var ze=function(){var t=Object(i.useState)(""),e=Object(o.a)(t,2),a=e[0],s=e[1],r=Object(i.useState)(""),c=Object(o.a)(r,2),l=c[0],u=c[1],d=Object(i.useState)(""),h=Object(o.a)(d,2),j=h[0],b=h[1],x=Object(i.useState)(""),p=Object(o.a)(x,2),k=p[0],y=p[1],O=Object(i.useState)("user"),g=Object(o.a)(O,2),f=g[0],v=g[1],_=function(){var t=Object(J.a)(V.a.mark((function t(){var e;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!q(j)){t.next=18;break}if(!Z(k)){t.next=15;break}return t.prev=2,t.next=5,G.a.post(Fe+"lisaa_kayttaja",{etunimi:a,sukunimi:l,sahkoposti:j,salasana_hash:k,rooli:f});case 5:e=t.sent,console.log(e),alert("K\xe4ytt\xe4j\xe4 lis\xe4tty onnistuneesti!"),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0.message);case 13:t.next=16;break;case 15:console.log("Salasana ei ole turvallinen!");case 16:t.next=19;break;case 18:console.log("S\xe4hk\xf6posti ei kelpaa!");case 19:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}();return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(Vt.a,{variant:"h2",component:"h2",style:{paddingTop:"60px"},className:"h3 mb-3 font-weight-normal",children:W.rekisteroidy}),Object(n.jsxs)($t.a,{container:!0,spacing:1,children:[Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsx)(Ft.a,{name:"etunimi",label:W.etunimi,id:"outlined-start-adornment1",variant:"outlined",value:a,onChange:function(t){return s(t.target.value)}})}),Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsx)(Ft.a,{name:"sukunimi",label:W.sukunimi,id:"outlined-start-adornment2",variant:"outlined",value:l,onChange:function(t){return u(t.target.value)}})}),Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsx)(Ft.a,{name:"sahkoposti",label:W.sahkoposti,id:"outlined-start-adornment3",variant:"outlined",value:j,onChange:function(t){return b(t.target.value)}})}),Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsxs)(Ne.a,{variant:"outlined",children:[Object(n.jsx)(Ce.a,{htmlFor:"outlined-adornment-password",children:W.salasana}),Object(n.jsx)(Ie.a,{name:"salasana",id:"outlined-adornment-password",labelWidth:70,value:k,type:"password",onChange:function(t){return y(t.target.value)}})]})}),Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsxs)(Ne.a,{component:"fieldset",children:[Object(n.jsx)(Ae.a,{component:"legend",children:W.rooli}),Object(n.jsxs)(Se.a,{"aria-label":"rooli",name:"rooli1",value:f,onChange:function(t){v(t.target.value)},children:[Object(n.jsx)(Te.a,{value:"user",control:Object(n.jsx)(Ee.a,{}),label:W.kayttaja}),Object(n.jsx)(Te.a,{value:"admin",control:Object(n.jsx)(Ee.a,{}),label:W.yllapitaja})]})]})}),Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsx)(m.a,{name:"rekisteroidy_nappi",onClick:_,type:"submit",className:"btn btn-lg btn-primary btn-block",variant:"contained",color:"primary",children:W.rekisteroidy})})]})]})})},Ke=null;new Error("Environment not properly set!");Ke="https://tentti-fullstack.herokuapp.com/";var Le=function(t){t.kirjautunut;var e=t.setKirjautunut,a=Object(i.useState)(""),s=Object(o.a)(a,2),r=s[0],c=s[1],l=Object(i.useState)(""),u=Object(o.a)(l,2),d=u[0],h=u[1],j=function(){var t=Object(J.a)(V.a.mark((function t(a,n){var i;return V.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={sahkoposti:a,salasana:n},t.prev=1,t.next=4,G.a.post(Ke+"kirjaudu/",i).then((function(t){window.localStorage.setItem("jwtToken",t.data.token),e(!0)}));case 4:t.next=10;break;case 6:t.prev=6,t.t0=t.catch(1),console.log("login error",t.t0),alert("Tunnus tai salasana v\xe4\xe4rin!");case 10:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e,a){return t.apply(this,arguments)}}();return Object(n.jsx)(n.Fragment,{children:Object(n.jsxs)("div",{className:"container",children:[Object(n.jsx)(Vt.a,{variant:"h2",component:"h2",style:{paddingTop:"60px"},className:"h3 mb-3 font-weight-normal",children:W.kirjaudu}),Object(n.jsxs)($t.a,{container:!0,spacing:1,children:[Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsx)(Ft.a,{name:"sahkoposti",label:W.sahkoposti,id:"outlined-start-adornment3",variant:"outlined",value:r,onChange:function(t){return c(t.target.value)}})}),Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsxs)(Ne.a,{variant:"outlined",children:[Object(n.jsx)(Ce.a,{htmlFor:"outlined-adornment-password",children:W.salasana}),Object(n.jsx)(Ie.a,{name:"salasana_hash",id:"outlined-adornment-password",labelWidth:70,value:d,type:"password",onChange:function(t){return h(t.target.value)}})]})}),Object(n.jsx)($t.a,{style:{padding:"20px"},container:!0,item:!0,xs:12,spacing:3,children:Object(n.jsx)(m.a,{onClick:function(){return j(r,d)},type:"submit",className:"btn btn-lg btn-primary btn-block",variant:"contained",color:"primary",children:W.kirjaudu})})]})]})})},Be=a(698),De=a(695),Ue=a(235),Pe=a(153),Re=a.n(Pe),We=a(152),He=a.n(We);function Ve(t){var e=t.setKirjautunut,a=(t.currentUser,t.setCurrentUser),s=t.currentUserName,r=t.setCurrentUserName,l=t.setCurrentExamId,u=t.currentExamIndex,d=t.setCurrentExamIndex,h=t.examEdit,j=t.setExamEdit,b=t.kaikkiKysymykset,x=(t.rows,t.setRows),p=y(),m=Object(i.useContext)(Ct).dispatch,k=Object(i.useState)(null),O=Object(o.a)(k,2),f=O[0],v=O[1],_=Boolean(f);return Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Be.a,{position:"fixed",children:Object(n.jsxs)(De.a,{children:[Object(n.jsxs)(Vt.a,{variant:"h6",className:p.title,children:[h||"/admin"===window.location.pathname?Object(n.jsx)(c.b,{style:{textDecoration:"none"},to:"/admin",children:Object(n.jsx)(g,{name:"tentit",onClick:function(){u>=0&&(d(-1),l(-1),x(b))},children:W.tentit})}):Object(n.jsx)(c.b,{style:{textDecoration:"none"},to:"/user",children:Object(n.jsx)(g,{name:"tentit",onClick:function(){u>=0&&(d(-1),l(-1),x(b))},children:W.tentit})}),Object(n.jsx)(c.b,{style:{textDecoration:"none"},to:"/stats",children:Object(n.jsx)(g,{name:"tilastot",children:W.tilastot})}),Object(n.jsx)(c.b,{style:{textDecoration:"none"},to:"/upload",children:Object(n.jsx)(g,{name:"tiedostonlahetys",children:W.tiedostonlahetys})}),Object(n.jsx)(g,{name:"tietoa",target:"_blank",href:"https://www.youtube.com/watch?v=sAqnNWUD79Q",children:W.tietoa})]}),h||"/admin"===window.location.pathname?Object(n.jsx)(c.b,{style:{textDecoration:"none"},to:"/user",children:Object(n.jsx)(S.a,{color:"secondary",onClick:function(){j(!1)},children:Object(n.jsx)(He.a,{})})}):Object(n.jsx)(c.b,{style:{textDecoration:"none"},to:"/admin",children:Object(n.jsx)(S.a,{color:"default",onClick:function(){j(!0)},children:Object(n.jsx)(He.a,{})})}),Object(n.jsx)(S.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(t){v(t.currentTarget)},color:"inherit",children:Object(n.jsx)(Re.a,{})}),Object(n.jsxs)(Ue.a,{id:"menu-appbar",anchorEl:f,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:_,onClose:function(){v(null)},children:[Object(n.jsx)(zt.a,{disabled:!0,style:{justifyContent:"center"},children:Object(n.jsx)(Re.a,{})}),Object(n.jsx)(zt.a,{disabled:!0,children:Object(n.jsx)("strong",{children:s})}),Object(n.jsx)(zt.a,{onClick:function(){},children:W.omatTentit}),Object(n.jsx)(zt.a,{onClick:function(){window.localStorage.removeItem("jwtToken"),e(!1),function(t){t({type:"LOGOUT_USER",data:{}})}(m),a(""),r(""),v(null)},children:W.poistu})]})]})})})}function Je(){var t=y();return W.setLanguage(W.getInterfaceLanguage()),console.log("Browser language in Settings: "+W.getInterfaceLanguage()),console.log("React App language: "+W.getLanguage()),Object(n.jsx)(n.Fragment,{children:Object(n.jsx)(Be.a,{position:"fixed",children:Object(n.jsx)(De.a,{children:Object(n.jsxs)(Vt.a,{variant:"h6",className:t.title,children:[Object(n.jsx)(g,{name:"rekisteroidy",href:"/register",children:W.rekisteroidy}),Object(n.jsx)(g,{name:"kirjaudu",href:"/login",children:W.kirjaudu})]})})})})}var Me=a(22),Ge=function(){var t=Object(i.useState)(!1),e=Object(o.a)(t,2),a=e[0],s=e[1],r=Object(i.useState)(""),c=Object(o.a)(r,2),l=c[0],u=c[1],d=Object(i.useState)(""),h=Object(o.a)(d,2),j=h[0],b=h[1],x=Object(i.useState)(-1),p=Object(o.a)(x,2),m=p[0],k=p[1],y=Object(i.useState)(-1),O=Object(o.a)(y,2),g=O[0],f=O[1],v=Object(i.useState)(!1),_=Object(o.a)(v,2),w=_[0],I=_[1],C=Object(i.useState)([]),E=Object(o.a)(C,2),S=E[0],T=E[1],N=Object(i.useState)([]),A=Object(o.a)(N,2),F=A[0],z=A[1];return Object(i.useEffect)((function(){var t=Y();t&&(s(!0),X(u,b,t),at(T))}),[a]),Object(n.jsx)("div",{children:a?Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Ve,{setKirjautunut:s,currentUser:l,setCurrentUser:u,currentUserName:j,setCurrentUserName:b,currentExamId:g,setCurrentExamId:f,currentExamIndex:m,setCurrentExamIndex:k,examEdit:w,setExamEdit:I,kaikkiKysymykset:S,setKaikkiKysymykset:T,rows:F,setRows:z}),Object(n.jsxs)(Me.c,{children:[Object(n.jsx)(Me.a,{exact:!0,path:"/login",children:Object(n.jsx)(At,{currentUser:l,currentExamId:g,setCurrentExamId:f,currentExamIndex:m,setCurrentExamIndex:k,kaikkiKysymykset:S,rows:F,setRows:z})}),Object(n.jsx)(Me.a,{exact:!0,path:"/user",children:Object(n.jsx)(At,{currentUser:l,currentExamId:g,setCurrentExamId:f,currentExamIndex:m,setCurrentExamIndex:k,kaikkiKysymykset:S,rows:F,setRows:z})}),Object(n.jsx)(Me.a,{exact:!0,path:"/admin",children:Object(n.jsx)(de,{currentUser:l,currentExamId:g,setCurrentExamId:f,currentExamIndex:m,setCurrentExamIndex:k,kaikkiKysymykset:S,setKaikkiKysymykset:T,rows:F,setRows:z})}),Object(n.jsx)(Me.a,{exact:!0,path:"/",children:Object(n.jsx)(At,{currentUser:l,currentExamId:g,setCurrentExamId:f,currentExamIndex:m,setCurrentExamIndex:k,kaikkiKysymykset:S,rows:F,setRows:z})}),Object(n.jsx)(Me.a,{exact:!0,path:"/stats",children:Object(n.jsx)(Oe,{})}),Object(n.jsx)(Me.a,{exact:!0,path:"/upload",children:Object(n.jsx)(we,{})})]})]}):Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(Je,{}),Object(n.jsxs)(Me.c,{children:[Object(n.jsx)(Me.a,{exact:!0,path:"/register",children:Object(n.jsx)(ze,{})}),Object(n.jsx)(Me.a,{exact:!0,path:"*",children:Object(n.jsx)(Le,{kirjautunut:a,setKirjautunut:s})})]})]})})},qe=a(231),Ze=a.n(qe),Ye=a(100),$e=a.n(Ye),Qe=null;new Error("Environment not properly set!");Qe="https://tentti-fullstack.herokuapp.com",console.log("WebSocket kuuntelee ilmoituksia");var Xe=Ze()(Qe);Xe.on("connected",(function(t){Xe.emit("ready for data",{})})),Xe.on("update",(function(t){var e=JSON.parse(t.message.payload);switch(console.log("Trigger: "+e.trigger),e.trigger){case"insert_tentti":console.log("Uusi tentti "+e.row.nimi+" lis\xe4tty!"),$e.a.fire({title:"<strong>Uusi tentti <i>"+e.row.nimi+"</i> lis\xe4tty!</strong>",html:'<pre style="text-align: left;"><b>id:</b>\t\t\t'+e.row.id+"<br/><b>nimi:</b>\t\t\t"+e.row.nimi+"<br/><b>suoritettu:</b>\t\t"+e.row.suoritettu+"<br/><b>aloitus:</b>\t\t"+e.row.aloitus+"<br/><b>lopetus:</b>\t\t"+e.row.lopetus+"<br/><b>minimipisteraja:</b>\t"+e.row.minimipisteraja+"</pre>",timer:1e4,timerProgressBar:!0,position:"bottom-end",icon:"success"});break;case"delete_tentti":console.log("Tentti "+e.row.nimi+" poistettu!"),$e.a.fire({title:"<strong>Tentti <i>"+e.row.nimi+"</i> poistettu!</strong>",html:'<pre style="text-align: left;"><b>id:</b>\t\t\t'+e.row.id+"<br/><b>nimi:</b>\t\t\t"+e.row.nimi+"<br/><b>suoritettu:</b>\t\t"+e.row.suoritettu+"<br/><b>aloitus:</b>\t\t"+e.row.aloitus+"<br/><b>lopetus:</b>\t\t"+e.row.lopetus+"<br/><b>minimipisteraja:</b>\t"+e.row.minimipisteraja+"</pre>",timer:1e4,timerProgressBar:!0,position:"bottom-end",icon:"warning"});break;case"insert_kurssi":console.log("Uusi kurssi "+e.row.nimi+" lis\xe4tty!"),$e.a.fire({title:"<strong>Uusi kurssi <i>"+e.row.nimi+"</i> lis\xe4tty!</strong>",html:'<pre style="text-align: left;"><b>id:</b>\t\t\t'+e.row.id+"<br/><b>nimi:</b>\t\t\t"+e.row.nimi+"<br/><b>aloitus:</b>\t\t"+e.row.aloitus+"<br/><b>lopetus:</b>\t\t"+e.row.lopetus+"<br/></pre>",timer:1e4,timerProgressBar:!0,position:"bottom-end",icon:"success"});break;case"delete_kurssi":console.log("Kurssi "+e.row.nimi+" poistettu!"),$e.a.fire({title:"<strong>Kurssi <i>"+e.row.nimi+"</i> poistettu!</strong>",html:'<pre style="text-align: left;"><b>id:</b>\t\t\t'+e.row.id+"<br/><b>nimi:</b>\t\t\t"+e.row.nimi+"<br/><b>aloitus:</b>\t\t"+e.row.aloitus+"<br/><b>lopetus:</b>\t\t"+e.row.lopetus+"<br/></pre>",timer:1e4,timerProgressBar:!0,position:"bottom-end",icon:"warning"});break;default:console.log("Jotain meni pahasti pieleen...")}})),r.a.render(Object(n.jsx)(Nt,{children:Object(n.jsx)(St,{children:Object(n.jsx)(c.a,{children:Object(n.jsx)(Ge,{})})})}),document.getElementById("root"))}},[[632,1,2]]]);
//# sourceMappingURL=main.430090e4.chunk.js.map